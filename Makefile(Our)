#
# Variables:
#
CC = gcc
BIN = OCR
SRC = Main.c OCR.c wordSegmentation.c lineSegmentation.c charSegmentation.c greyscale_otsu.c for_show.c Basics.c segmentation.c 
OBJ = OCR.o greyscale_otsu.o for_show.o Basics.o segmentation.o
 
 
#
# Error Flags:
#
ERROR_CFLAGS = -Wall -Wextra -std=c99
 
 
#
# Compiler Flags:
#
GTK_CFLAGS = $$(pkg-config --cflags gtk+-3.0)
SDL_CFLAGS = $$(pkg-config --cflags sdl -MMD -lm)
 
CFLAGS = $(ERROR_CFLAGS) $(GTK_CFLAGS) $(SDL_CFLAGS)
 
 
#
# Link Editor Flags:
#
GTK_LDFLAGS = $$(pkg-config --libs gtk+-3.0)
GLADE_LDFLAGS = $$(pkg-config --libs gmodule-2.0 -lm)
 
LDFLAGS = $(ERROR_CFLAGS) $(GTK_LDFLAGS) $(GLADE_LDFLAGS)
 
LDLIBS = `pkg-config --libs sdl` -lSDL_image -lm

#
# Building of the program:
#
all: $(BIN)

tests.o: for_show.h greyscale_otsu.h
greyscale_otsu.o: greyscale_otsu.h
for_show.o: for_show.h
Basics.o: Basics.h
segmentation.o: segmentation.h
wordSegmentation.o: wordSegmentation.h
lineSegmentation.o: lineSegmentation.h
charSegmentation.o: charSegmentation.h

$(BIN): $(SRC)
	$(CC) $(CFLAGS) -c $(SRC)
	$(CC) $(LDFLAGS) -o $(BIN) $(OBJ)
 
 
#
# Cleaning:
#
clean:
	rm -f *.o *~ core $(BIN)
